


╔══════════════════════════════ APPLICATION LAYER ═════════════════════════════╗

        SERVER (Data Producer)                     CLIENT (Listener)

   ┌───────────────────────────────┐         ┌──────────────────────────────┐
   │        IDataStream<T>         │────────▶│      IStreamListener<T>      │
   │          produces T           │         │        consumes T            │
   └───────────────┬───────────────┘         └──────────────────────────────┘
                   │                                      ▲
                   │ pushes data                          │ receives data
                   ▼                                      │
   ┌───────────────────────────────┐         ┌──────────────────────────────┐
   │     Subscribe()               │◀────────│        Start()               │
   │     Unsubscribe()             │────────▶│        Stop()                │
   │ manages connected listeners   │         │   controls subscription      │
   └───────────────────────────────┘         └──────────────────────────────┘

╚══════════════════════════════════════════════════════════════════════════════╝
                   │                                      ▲
                   │                                      │
                   ▼                                      │
╔════════════════════════════ StreamJsonRpc LAYER ═════════════════════════════╗
 
         SERVER SIDE                                 CLIENT SIDE

   ┌─────────────────────────────┐             ┌────────────────────────────┐
   │        Stream Tracker       │◀───────────▶│        Stream Tracker      │
   │        StreamId = 42        │   RPC msgs  │        StreamId = 42       │
   │  T → StreamItem(42, T)      │             │   StreamItem → T           │
   └─────────────────────────────┘             └────────────────────────────┘

╚══════════════════════════════════════════════════════════════════════════════╝
                   │                                      ▲
                   │                                      │
                   ▼                                      │
╔═══════════════════════════════ TRANSPORT LAYER ══════════════════════════════╗

        SERVER PIPE                                 CLIENT PIPE

   ┌───────────────────────────────┐         ┌──────────────────────────────┐
   │ NamedPipe / StdIO / Socket    │◀───────▶│ NamedPipe / StdIO / Socket   │
   │ carries JSON-RPC messages     │         │ carries JSON-RPC messages    │
   └───────────────────────────────┘         └──────────────────────────────┘

╚══════════════════════════════════════════════════════════════════════════════╝


